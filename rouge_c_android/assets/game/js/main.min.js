var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function a(e){try{h(n.next(e))}catch(t){s(t)}}function r(e){try{h(n["throw"](e))}catch(t){s(t)}}function h(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,r)}h((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,s&&(a=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,s=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=t.call(e,h)}catch(n){i=[6,n],s=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,s,a,r,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},PayContinue=function(e){function t(){var t=e.call(this)||this;return t.isShow=!0,t.skinName="resource/skin/payContinue.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init(),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShare,this),this.btnQueding.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickQueding,this),this._reGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickClose,this),EventManager.getInstance().addEventListener(ApiEvent.PAY_SUCCESS,this.onPaySuccessContinue,this),EventManager.getInstance().addEventListener(ApiEvent.SHARE_SUCCESS,this.onShareContinue,this)},t.prototype.init=function(){this.isShow=!0,console.log("Data.GameContext.shareTimes    "+Data.GameContext.shareTimes),Data.GameContext.shareTimes>=2?this._reGroup.visible=!0:this._reGroup.visible=!1},t.prototype.onclickQueding=function(){Data.GameContext.isFirstOrder&&(console.log("chongzhi..."),window.TDGA.onEvent("玩家下单请求",{CreateOrder:1}),OrderApi.createOrder("喵喵游戏",6),Data.GameContext.isFirstOrder=!1)},t.prototype.onClickShare=function(){wx&&wx.ready(function(){var e=new BodyMenuShareAppMessage;e.title="领取奖品",e.desc="多款礼品任意选择。",e.link="http://kh.chitugame.com/ct-admin/weixin/auth?td_channelid="+Data.ChannelInfo.channelInfo,e.imgUrl="http://kh.chitugame.com/game/icon.png",e.success=function(){window.TDGA.onEvent("分享进入第3关",{forPass:1}),EventManager.getInstance().SendEvent(ApiEvent.SHARE_SUCCESS),ShareInfoApi.sendShareComplateInfo()},wx.onMenuShareAppMessage(e);var t=new BodyMenuShareTimeline;t.title="领取奖品",t.link="http://kh.chitugame.com/ct-admin/weixin/auth?td_channelid="+Data.ChannelInfo.channelInfo,t.imgUrl="http://kh.chitugame.com/game/icon.png",t.success=function(){window.TDGA.onEvent("ShareEvent",{forPass:1}),EventManager.getInstance().SendEvent(ApiEvent.SHARE_SUCCESS),ShareInfoApi.sendShareComplateInfo()},wx.onMenuShareTimeline(t)}),this.share=new Share,this.stage.addChild(this.share)},t.prototype.onShareContinue=function(){console.log("out"),this.isShow&&Data.GameContext.shareTimes<2&&(console.log("onClickContinue"),null!=this.share&&(this.stage.removeChild(this.share),this.share=null),LayerUtil.gameMain.stage.removeChild(this),LayerUtil.gameMain.guoguan(),this.isShow=!1)},t.prototype.onPaySuccessContinue=function(){this.isShow&&(LayerUtil.gameMain.stage.removeChild(this),LayerUtil.gameMain.guoguan(),this.isShow=!1,window.TDGA.onEvent("充值成功",{PaySuccess:6}),window.TDGA.onChargeSuccess({orderId:"account123time0923173248",iapId:"喵喵口红",currencyAmount:6,currencyType:"CNY",virtualCurrencyAmount:60,paymentType:"WeChatPay"}),window.TDGA.onItemPurchase({item:"payCNY6",itemNumber:6,priceInVirtualCurrency:60}),window.TDGA.onMissionBegin("进入游戏第三关"))},t.prototype.onclickClose=function(){this.parent.stage.removeChild(this),LayerUtil.hallPanel.stage.removeChild(LayerUtil.gameMain),Data.DataManager.subGames.forEach(function(e){e.gameType==Data.GameType.TI_YAN&&(LayerUtil.gameMain=null,LayerUtil.gameMain=new GameMain(e,LayerUtil.shopMain),LayerUtil.hallPanel.stage.addChild(LayerUtil.gameMain))})},t}(eui.Component);__reflect(PayContinue.prototype,"PayContinue");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?n(o):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),t._screenW=this.stage.stageWidth,t._screenH=this.stage.stageHeight,PlayerApi.getPlayerInfo(),PlayerApi.getPlayerChannelInfo(),GoodsApi.getGoodsInfo(),window.TDGA.onEvent("点击游戏链接"),console.log("Main Init !   1"),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var i=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",i),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return t=i.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return i.sent(),this.stage.removeChild(e),[3,5];case 4:return t=i.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,i){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){utils.SoundUtils.instance().initSound(),LayerUtil.shopMain=new ShopMain,LayerUtil.hallPanel=new HallPanel(LayerUtil.shopMain),this.addChild(LayerUtil.hallPanel)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function o(e){t.call(n,e)}function s(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(n,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var r=e.split("/");r.pop();var h=r.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(n,generateJSON.paths[e])},this):RES.getResByUrl(h,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){t.call(n,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Data;!function(e){var t=function(){function e(e){this.name=e.name,this.tel=e.tel,this.addr=e.addr}return e}();e.Address=t,__reflect(t.prototype,"Data.Address")}(Data||(Data={}));var Data;!function(e){var t=function(){function e(){}return e.channelInfo="chitugame",e}();e.ChannelInfo=t,__reflect(t.prototype,"Data.ChannelInfo")}(Data||(Data={}));var Data;!function(e){var t=function(){function e(){}return e.init=function(t,i){e.subGames=t,e.goods=i},e}();e.DataManager=t,__reflect(t.prototype,"Data.DataManager")}(Data||(Data={}));var Data;!function(e){var t=function(){function e(){}return e.isWin=!1,e.isFirstOrder=!0,e.shareTimes=0,e}();e.GameContext=t,__reflect(t.prototype,"Data.GameContext")}(Data||(Data={}));var Data;!function(e){var t=function(){function e(){}return e.TI_YAN=1,e.CHUANG_GUAN=2,e.JING_SU=3,e}();e.GameType=t,__reflect(t.prototype,"Data.GameType")}(Data||(Data={}));var Data;!function(e){var t=function(){function e(e,t,i,n,o,s,a){this.subGameId=e,this.imgUrl=t,this.gameName=i,this.gameType=n,this.price=o,this.gameGroup=s,this.priceGroup=a}return e}();e.SubGame=t,__reflect(t.prototype,"Data.SubGame");var i=function(){function e(e,t,i){this.goodsId=e,this.goodsCount=t,this.price=i}return e}();e.Goods=i,__reflect(i.prototype,"Data.Goods")}(Data||(Data={}));var Data;!function(e){var t=function(){function e(){}return e.KOU_HONG=1,e.LI_PIN=2,e.PI_FU=3,e}();e.GoodsType=t,__reflect(t.prototype,"Data.GoodsType")}(Data||(Data={}));var Data;!function(e){var t=function(){function e(){}return e}();e.MarqueeData=t,__reflect(t.prototype,"Data.MarqueeData")}(Data||(Data={}));var Data;!function(e){var t=function(){function e(){}return e}();e.PlayerData=t,__reflect(t.prototype,"Data.PlayerData")}(Data||(Data={}));var Data;!function(e){var t=function(){function e(){}return e.ZERO=0,e.ONE_HUNDRED=100,e.THREE_HUNDRED=300,e.FIVE_HUNDRED=500,e}();e.PriceType=t,__reflect(t.prototype,"Data.PriceType")}(Data||(Data={}));var Data;!function(e){var t=function(){function e(){}return e}();e.RankData=t,__reflect(t.prototype,"Data.RankData");var i=function(){function e(){}return e}();e.RankCountDown=i,__reflect(i.prototype,"Data.RankCountDown")}(Data||(Data={}));var GameMain=function(e){function t(t,i){var n=e.call(this)||this;return n.moveSpeed=100,n.jiaodu=10,n.juli=500,n.fly_juli=650,n._fangxiang=360,n.rotateArr=[],n.rougeArr=[],n._level=1,n.aspeed=0,n.prevSpeed=0,n.targetSpeed=0,n.doudong=0,n.rightrotaion=!0,n.nowDuring=0,n.is11=!1,n.is12=!1,n.is13=!1,n.rArr=[],n.goodsItemData=t,n.m_mainsence=i,n.skinName="resource/skin/gamemain.exml",n.config=RES.getRes("speedConfig_json"),n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),console.log("**********this.goodsItemData.gameType    "+this.goodsItemData.gameType+"  goodsFenqu     "+this.goodsItemData.priceGroup+"     goodsType     "+this.goodsItemData.gameGroup),utils.SoundUtils.instance().playBg(),3==this.goodsItemData.gameType?this.initXS():this.init(),this.rect_dangban.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickInsert,this),this.render=new DateTimer(17),this.render.addEventListener(egret.TimerEvent.TIMER,this.update,this),this.render.start(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this);var t=RES.getRes("juice_png"),i=RES.getRes("juice_json");this.juice=new particle.GravityParticleSystem(t,i),this.juice.x=this.penjian.x,this.juice.y=this.penjian.y},t.prototype.onRemove=function(){this.timer.stop(),this.render.stop()},t.prototype.init=function(){function e(e){this.miao--,this.miao<=0&&(this.miao=0),this.lb_time.text=this.miao,console.log("倒计时:"+this.miao)}function t(e){console.log("结束"),this.rect_dangban.visible=!1,this.GameOver(),this.timer.stop(),console.log("定时器停止")}this.goodsItemData.gameType!=Data.GameType.JING_SU?(this.initZidan(),this.lb_rougeNum.text="剩余数量: "+this.getRougeNum(this._level)+"/"+this.getRougeNum(this._level)):this.lb_rougeNum.text="分数: 0",this.gp_guan.visible=!1,this.rect_dangban.visible=!0;var i=this.getTime(this._level);console.log("倒计时"+i),this.timer&&this.timer.stop(),egret.Timer,this.timer=new DateTimer(1e3,i),this.timer.addEventListener(egret.TimerEvent.TIMER,e,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,t,this),this.timer.start(),this.miao=i,this.speed=this.getSpeed(this._level),this.targetSpeed=this.speed,console.log("速度"+this.speed);var n=Math.random();console.log(n),.01>n&&this.rotation},t.prototype.initXS=function(){function e(e){this.miao--,this.miao<=0&&(this.miao=0),this.lb_time.text=this.miao,console.log("倒计时:"+this.miao)}function t(e){}console.log(this.goodsItemData.gameType),this.level1.visible=!1,this.level2.visible=!1,this.level3.visible=!1,this.gp_guan.visible=!1,this.rect_dangban.visible=!0;var i=this.getTime(this._level);console.log("倒计时"+i),this.timer=new DateTimer(1e3,i),this.timer.addEventListener(egret.TimerEvent.TIMER,e,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,t,this),this.timer.start(),this.miao=i,this.speed=this.getSpeed(this._level),this.targetSpeed=this.speed,console.log("速度"+this.speed)},t.prototype.GameOver=function(){0==LayerUtil.gameMain.goodsItemData.priceGroup?(this.render.stop(),this.timer.stop(),this.stage.addChild(new Regame)):null==this.gameover?(this.gameover=new GameOver(this.miao,this.score,this.goodsItemData.gameType,this._level,this.goodsItemData,this.m_mainsence),this.stage.addChild(this.gameover)):this.gameover.visible=!0},t.prototype.onClickInsert=function(){10==this.gp_circle.numChildren?(this.is11=!0,this.targetSpeed=3*-this.targetSpeed):11==this.gp_circle.numChildren?(this.is12=!0,this.targetSpeed=3*-this.targetSpeed):12==this.gp_circle.numChildren&&(this.is13=!0,this.targetSpeed=4*-this.targetSpeed),this.rouge=new egret.Bitmap,this.rouge.texture=RES.getRes("rouge_png"),this.rouge.anchorOffsetX=this.rouge.width/2,this.rouge.anchorOffsetY=0,this.rouge.x=this.gp_circle.x,this.rouge.y=this.gp_circle.y+this.juli,console.log(this.rouge.x+"###"+this.rouge.y),this.addChild(this.rouge),this.isMoving=!0,this.img_rouge.visible=!1;var e=this.zidanarr.pop();this.contains(e)&&this.removeChild(e)},t.prototype.update=function(){this.nowDuring>=this.config.switchLimit&&(this.prevSpeed=this.aspeed,this.rightrotaion=Math.random()>.5?!0:!1,this.targetSpeed=(this.rightrotaion?1:-1)*(this.speed+this.config.maxSpeed*Math.random()),this.nowDuring=0,console.log("isChange!targetSpeed="+this.targetSpeed+"------prevSpeed="+this.prevSpeed));var e=this.getRougeNum(this._level),t=e-this.gp_circle.numChildren;if(!Data.GameContext.isWin&&4>t&&3==this._level&&this.is11?this.isMoving&&(console.log("jinru必杀范围了"),this.rightrotaion=!this.rightrotaion,this.targetSpeed=(this.rightrotaion?1:-1)*(this.config.extraBase+(this.gp_circle.numChildren-10)*this.config.extraSpeed),this.is11=!1,console.log("extra!"+this.targetSpeed)):!Data.GameContext.isWin&&4>t&&3==this._level&&this.is12?(this.rightrotaion=!this.rightrotaion,this.targetSpeed=(this.rightrotaion?1:-1)*(this.config.extraBase+(this.gp_circle.numChildren-10)*this.config.extraSpeed),this.is12=!1,console.log("extra!"+this.targetSpeed)):!Data.GameContext.isWin&&4>t&&3==this._level&&this.is13?(this.rightrotaion=!this.rightrotaion,this.targetSpeed=(this.rightrotaion?1:-1)*(this.config.extraBase+(this.gp_circle.numChildren-10)*this.config.extraSpeed),this.is13=!1,console.log("extra!"+this.targetSpeed)):!Data.GameContext.isWin&&4>t&&3==this._level&&(this.targetSpeed=(this.rightrotaion?1:-1)*(this.config.extraBase+this.config.maxSpeed+(this.gp_circle.numChildren-10)*this.config.extraSpeed),console.log("final--------"+this.targetSpeed)),this.nowDuring++,this.targetSpeed-this.prevSpeed>0){var i=this.targetSpeed-this.prevSpeed;this.aspeed=this.aspeed>this.targetSpeed?this.targetSpeed:this.aspeed+i/this.config.paceToTarget}else if(this.targetSpeed-this.prevSpeed<0){var i=this.prevSpeed-this.targetSpeed;this.aspeed=this.aspeed<this.targetSpeed?this.targetSpeed:this.aspeed-i/this.config.paceToTarget}this.gp_circle.rotation+=this.aspeed,this.img_juzi.rotation+=this.aspeed,this.gp_circle.y-=this.doudong,this.img_juzi.y-=this.doudong,-20==this.doudong&&(this.doudong=0,this.penjian.visible=!1),20==this.doudong&&(this.doudong=-20),2==this._level&&(this.level2.source="level_png"),3==this._level&&(this.level3.source="level_png"),this.isMoving&&(this.rouge.y-=this.moveSpeed,this.rect_dangban.touchEnabled=!1),this.isMoving&&this.isMove()},t.prototype.isMove=function(){var e=!1;if(this.rouge.y<this.fly_juli){this.img_rouge.visible=!0,this.isMoving=!1;var t=Math.floor(-this.gp_circle.rotation);0>t&&(t=360+t);for(var i=0;i<this.rArr.length;i++)if(Math.abs(this.rArr[i]-t)<=this.jiaodu&&(e=!0,this.rect_dangban.visible=!1,this.removeChild(this.rouge),window.TDGA.onMissionFailed("GameFailed: Level"+this._level),this.timer.stop(),utils.SoundUtils.instance().stopBg(),utils.SoundUtils.instance().playShibai(),this.goodsItemData.gameType==Data.GameType.TI_YAN||this.goodsItemData.gameType==Data.GameType.CHUANG_GUAN))return this.render.stop(),this.kick_rouge.visible=!0,this.kickOut.play(),void this.kickOut.addEventListener(egret.Event.COMPLETE,function(){this.kick_rouge.visible=!1,this.kickOut.stop(),this.GameOver()},this);if(!e){this.doudong=20,utils.SoundUtils.instance().playbit(),this.juice.x=this.penjian.x,this.juice.y=this.penjian.y,this.addChild(this.juice),this.juice.start(100),this.rect_dangban.touchEnabled=!0;var n=this.localToGlobal(this.rouge.x,this.rouge.y),o=this.gp_circle.globalToLocal(n.x,n.y);this.rouge.x=o.x,this.rouge.y=o.y,this.rouge.rotation=-this.gp_circle.rotation,this.gp_circle.addChild(this.rouge),this.score=this.gp_circle.numChildren;var s=Math.floor(this.rouge.rotation);if(0>s&&(s=360+s),this.rotateArr.push(s),this.rougeArr.push(this.rouge),console.log(this.rotateArr),this.rArr=this.rotateArr,3==this.goodsItemData.gameType)if(console.log(this.score),this.score<=6&&this.score>0){this.rouge.scaleX=1,this.rouge.scaleY=1,this.jiaodu=10;for(var a=0;a<this.gp_circle.numChildren;a++){var r=this.gp_circle.getChildAt(a);r.scaleX=1,r.scaleY=1}}else if(this.score<=10&&this.score>6){this.rouge.scaleX=.8,this.rouge.scaleY=.8,this.jiaodu=8;for(var a=0;a<this.gp_circle.numChildren;a++){var r=this.gp_circle.getChildAt(a);r.scaleX=.8,r.scaleY=.8}}else if(this.score<=15&&this.score>10){this.rouge.scaleX=.6,this.rouge.scaleY=.8,this.jiaodu=6;for(var a=0;a<this.gp_circle.numChildren;a++){var r=this.gp_circle.getChildAt(a);r.scaleX=.6,r.scaleY=.8}}else if(this.score<=20&&this.score>15){this.rouge.scaleX=.4,this.rouge.scaleY=.6,this.jiaodu=4;for(var a=0;a<this.gp_circle.numChildren;a++){var r=this.gp_circle.getChildAt(a);r.scaleX=.4,r.scaleY=.6}}else if(this.score>20){this.rouge.scaleX=.2,this.rouge.scaleY=.5,this.jiaodu=2;for(var a=0;a<this.gp_circle.numChildren;a++){var r=this.gp_circle.getChildAt(a);r.scaleX=.2,r.scaleY=.5}}var h=this.gp_circle.numChildren,l=this.getRougeNum(this._level);if(this.goodsItemData.gameType!=Data.GameType.JING_SU){if(h>=12&&0==Data.GameContext.isWin&&3==this._level){for(var c=360,g=0,a=0;a<this.rArr.length-1;a++){var u=Math.abs(s-this.rArr[a]);c>u&&(c=u,g=a)}this.rougeArr[g].rotation=this.rouge.rotation+10,this.rotateArr[g]=this.rotateArr[this.rotateArr.length-1]+10,this.rougeArr[g].x=this.rouge.x,this.rougeArr[g].y=this.rouge.y}this.lb_rougeNum.text="剩余数量: "+(l-h)+"/"+l}else this.lb_rougeNum.text="分数: "+h;if(this.rArr.length>1){for(var a=0;a<this.rArr.length-1;a++)for(var i=a+1;i<this.rArr.length;i++)if(Math.abs(this.rArr[a]-this.rArr[i])<=this.jiaodu&&(this.rect_dangban.visible=!1,window.TDGA.onMissionFailed("GameFailed: Level"+this._level),this.timer.stop(),utils.SoundUtils.instance().stopBg(),utils.SoundUtils.instance().playShibai(),this.goodsItemData.gameType==Data.GameType.TI_YAN||this.goodsItemData.gameType==Data.GameType.CHUANG_GUAN))return this.render.stop(),this.kick_rouge.visible=!0,this.kickOut.play(),void this.kickOut.addEventListener(egret.Event.COMPLETE,function(){this.kick_rouge.visible=!1,this.kickOut.stop(),this.GameOver()},this);if(h>=l&&this.goodsItemData.gameType!=Data.GameType.JING_SU){this._level++,this.rect_dangban.visible=!1,this.speed=this.getSpeed(this._level),console.log("过关之后的速度"+this.speed),this.img_guan.source="resource/assets/game/guan"+this._level+".png";for(var a=0;a<this.shadow.length;a++)this.removeChild(this.shadow[a]);if(this.shadow=[],2==this._level&&1==this.goodsItemData.gameType)return window.TDGA.onMissionCompleted("第一关完成"),window.TDGA.onMissionBegin("进入游戏第二关"),this.penjian.visible=!1,this.timer.stop(),this.render.stop(),this.img_juzi.visible=!1,void this.showHalfAnimate();if(3==this._level&&1==this.goodsItemData.gameType)return window.TDGA.onMissionCompleted("第二关完成"),console.log("体验模式结束 "),this.stage.addChild(new PayContinue),this.timer.stop(),this.render.stop(),this.penjian.visible=!1,this.gp_circle.visible=!1,this.img_juzi.visible=!1,void this.showHalfAnimate();if(4==this._level&&1==this.goodsItemData.gameType)return window.TDGA.onMissionCompleted("第三关完成"),console.log("体验模式结束 "),this.stage.addChild(new AddressPanel),this.timer.stop(),this.render.stop(),void this.showHalfAnimate()}}}}},t.prototype.showHalfAnimate=function(){for(var e=this.gp_circle.numChildren,t=0;e>t;t++){var i=this.gp_circle.getChildAt(t),n=i.rotation+90;egret.Tween.get(i).to({rotation:n},500)}var o=this.gp_circle.y;egret.Tween.get(this.gp_circle).to({y:o+1800},1e3).call(function(){this.gp_circle.removeChildren(),this.gp_circle.y=o},this),this.orangeTween.visible=!0,this.halfOrange.play(),this.halfOrange.addEventListener(egret.Event.COMPLETE,function(){if(this.halfOrange.stop(),this.timer.stop(),this._level>=4&&this.goodsItemData.gameType==Data.GameType.CHUANG_GUAN)console.log("通关 获得奖励"),console.log("通关subGameId     "+this.goodsItemData.subGameId);else{if((3==this._level||4==this._level)&&1==this.goodsItemData.gameType)return;this.guoguan()}console.log(this._level+"关")},this)},t.prototype.guoguan=function(){this.gp_guan.visible=!0;egret.setTimeout(function(e){console.log("延时三秒:",e),this.gp_circle.visible=!0,this.img_juzi.visible=!0,this.initGame()},this,2e3,"egret")},t.prototype.initGame=function(){function e(e){this.miao--,this.miao<=0&&(this.miao=0),this.lb_time.text=this.miao,console.log("倒计时:"+this.miao)}function t(e){console.log("结束"),this.rect_dangban.visible=!1,this.GameOver(),this.timer.stop(),console.log("定时器停止")}console.log("游戏初始化"),console.log(this._level),console.log(this.speed),this.goodsItemData.gameType!=Data.GameType.JING_SU?(this.initZidan(),this.lb_rougeNum.text="剩余数量: "+this.getRougeNum(this._level)+"/"+this.getRougeNum(this._level)):this.lb_rougeNum.text="分数: 0",this.gp_guan.visible=!1,this.gp_circle.removeChildren(),this.rArr=[],this.rotateArr=[],this.rougeArr=[],this.rect_dangban.visible=!0;var i=this.getTime(this._level);console.log("当前时间"+i),console.log("当前速度"+this.speed),this.timer&&this.timer.stop(),this.timer=new DateTimer(1e3,i),this.timer.addEventListener(egret.TimerEvent.TIMER,e,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,t,this),this.timer.start(),this.render.start(),this.miao=i},t.prototype.initZidan=function(){this.zidanarr=null,this.shadow=null,this.zidanarr=[],this.shadow=[];for(var e=0;e<this.getRougeNum(this._level);e++){var t=new egret.Bitmap;t.texture=RES.getRes("back_png"),t.x=10,t.y=1135-30*e,this.addChild(t),this.shadow.push(t);var i=new egret.Bitmap;i.texture=RES.getRes("rouge1_png"),i.x=10,i.y=1135-30*e,this.addChild(i),this.zidanarr.push(i)}},t.prototype.initGame1=function(){function e(e){this.miao--,this.miao<=0&&(this.miao=0),this.lb_time.text=this.miao,console.log("倒计时:"+this.miao)}function t(e){console.log("结束"),this.rect_dangban.visible=!1,this.GameOver(),this.timer.stop(),console.log("定时器停止")}console.log("游戏初始化"),console.log(this._level),this.initZidan(),this.lb_rougeNum.text="剩余数量: "+this.getRougeNum(this._level)+"/"+this.getRougeNum(this._level),this.gp_guan.visible=!1,this.gp_circle.removeChildren(),this.rArr=[],this.rotateArr=[],this.rougeArr=[],this.rect_dangban.visible=!0,this.timer&&this.timer.stop();var i=this.getTime(this._level);console.log("倒计时"+i),this.timer=new DateTimer(1e3,i),this.timer.addEventListener(egret.TimerEvent.TIMER,e,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,t,this),this.timer.start(),this.render.start(),this.miao=i},t.prototype.initGame2=function(){function e(e){this.miao--,this.miao<=0&&(this.miao=0),this.lb_time.text=this.miao,console.log("倒计时:"+this.miao)}function t(e){console.log("结束"),this.rect_dangban.visible=!1,this.XSOver(),this.timer.stop(),console.log("定时器停止")}console.log("游戏初始化"),console.log(this._level),this.level1.visible=!1,this.level2.visible=!1,this.level3.visible=!1,this.gp_guan.visible=!1,this.gp_circle.removeChildAt(this.gp_circle.numChildren-1),this.rArr.splice(this.gp_circle.numChildren,1),this.rotateArr.splice(this.gp_circle.numChildren,1),this.rougeArr.splice(this.gp_circle.numChildren,1),console.log(this.rArr),console.log(this.gp_circle.numChildren),this.rect_dangban.visible=!0;var i=this.getTime(this._level);console.log("倒计时"+i),this.timer&&this.timer.stop(),this.timer=new DateTimer(1e3,i),this.timer.addEventListener(egret.TimerEvent.TIMER,e,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,t,this),this.timer.start(),this.render.start(),this.miao=i},t.prototype.getTime=function(e){return this.config["lev"+e].time},t.prototype.getSpeed=function(e){return this.config["lev"+e].zhuansu},t.prototype.getRougeNum=function(e){return this.config["lev"+e].rougeNum},t.prototype.getRotate=function(e){return this.config["lev"+e].rougeNum},t}(eui.Component);__reflect(GameMain.prototype,"GameMain");var HallPanel=function(e){function t(t){var i=e.call(this)||this;return i.marqueeIndex=0,i.tempMarqueeContent=["：）在12月5日通过第三关获得获得迪奥999系列口红一支","大脸猫在12月5日通过第三关获得迪奥999系列口红一支","喜欢i开头的单词在12月6日通过第三关获得迪奥999系列口红一支","D字母在12月6日通过第三关获得获得迪奥999系列口红一支","悠悠子衿在12月6日通过第三关获得迪奥999系列口红一支","爱你在12月7日通过第三关获得迪奥999系列口红一支","飞翔的企鹅在12月6日通过第三关获得迪奥999系列口红一支"],i._shopMain=t,i.skinName="resource/skin/hallPanel.exml",i}return __extends(t,e),t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this._marqueeText.mask=this._marqueeMask,this._marqueeText.wordWrap=!0,this._marqueeText.x=750,this._marqueeText.text=this.tempMarqueeContent[this.marqueeIndex],console.log("****4545454****"),egret.Tween.get(this._marqueeText,{loop:!0}).to({x:-this._marqueeText.width},9e3).call(function(){t._marqueeText.x=750,t.marqueeIndex++,t.marqueeIndex>t.tempMarqueeContent.length-1&&(t.marqueeIndex=0),t._marqueeText.text=t.tempMarqueeContent[t.marqueeIndex]}),this.init(),this._startGameBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickStartGame,this),this._rule.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickRule,this),this._kefu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickKefu,this),this._kefuClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickKefuClose,this),this._reward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickReward,this),this._rewardClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickRewardClose,this),this._get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onget,this),this._send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onsend,this)},t.prototype.init=function(){window.TDGA.onEvent("进入游戏界面"),OrderApi.wechatAPI(),console.log("Hallll   绑定微信通用接口"),ShareInfoApi.getShareInfo(),null!=Data.GameContext.player&&this.bindAccountInfo()},t.prototype.bindAccountInfo=function(){window.TDGA.Account({accountId:Data.GameContext.player.uid,level:12,gameServer:Data.GameContext.player.wechatArgs.country,accountType:1,age:24,accountName:Data.GameContext.player.wechatArgs.nickname,gender:Data.GameContext.player.wechatArgs.sex})},t.prototype.onclickKefu=function(){this._kefuPanel.visible=!0,showQRCode()},t.prototype.onclickKefuClose=function(){closeQRCode(),this._kefuPanel.visible=!1},t.prototype.onclickReward=function(){this._rewardPanel.visible=!0},t.prototype.onclickRewardClose=function(){this._rewardPanel.visible=!1},t.prototype.onclickRule=function(){LayerUtil.hallPanel.stage.addChild(new Rule)},t.prototype.onget=function(){},t.prototype.onsend=function(){ShareInfoApi.sendShareComplateInfo()},t.prototype.onclickStartGame=function(){var e=this;window.TDGA.onEvent("点击开始游戏"),window.TDGA.onMissionBegin("进入游戏第一关"),Data.DataManager.subGames.forEach(function(t){t.gameType==Data.GameType.TI_YAN&&(LayerUtil.gameMain=null,LayerUtil.gameMain=new GameMain(t,e._shopMain),e.stage.addChild(LayerUtil.gameMain))})},t}(eui.Component);__reflect(HallPanel.prototype,"HallPanel");var Rule=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skin/guize.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init(),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickClose,this)},t.prototype.init=function(){this.edu.text="1.点击开始按钮，开始游戏\n2.在游戏进行时，点击空白区域可以发射口红\n3.满足通关条件，可以进入下一关 \n4.第一关需要射出6支口红，第二关需要射出9支口 红,第三关需要射出13支口红 \n5.游戏需要进行三关，胜利后可以获得奖品 \n6.前两关免费，第三关需要分享或付费，方可进行 \n7.两支口红碰撞，则游戏结束 \n8.奖品为名品，如口红、挎包等，活动奖励随机发 送 \n9.活动最终解释权归赤兔所有 \n10.进行游戏行为则视为知晓且遵守活动规则"},t.prototype.onclickClose=function(){LayerUtil.hallPanel.stage.removeChild(this)},t}(eui.Component);__reflect(Rule.prototype,"Rule");var AddressPanel=function(e){function t(){var t=e.call(this)||this;return t.itemId=2e4,t.skinName="resource/skin/addressPanel.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),AddressApi.getAddressInfo(),this.init(),this._sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickSendBtnGame,this),this._closeAll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickCloseAllBtn,this),this._check1.addEventListener(eui.UIEvent.CHANGE,this.changeCheck1,this),this._check2.addEventListener(eui.UIEvent.CHANGE,this.changeCheck2,this),this._check3.addEventListener(eui.UIEvent.CHANGE,this.changeCheck3,this),EventManager.getInstance().addEventListener(ApiEvent.ADDRESS_INFO,this.refershAddressInfo,this)},t.prototype.init=function(){},t.prototype.refershAddressInfo=function(){Data.GameContext.address.name&&(this._name.text=Data.GameContext.address.name),Data.GameContext.address.tel&&(this._tel.text=Data.GameContext.address.tel),Data.GameContext.address.addr&&(this._addr.text=Data.GameContext.address.addr)},t.prototype.changeCheck1=function(){this.itemId=2e4},t.prototype.changeCheck2=function(){this.itemId=20001},t.prototype.changeCheck3=function(){this.itemId=20002},t.prototype.onclickCloseAllBtn=function(){this._sendGroup.visible=!1,this.parent.removeChild(this),LayerUtil.hallPanel.stage.removeChild(LayerUtil.gameMain)},t.prototype.onclickSendBtnGame=function(){""==this._name.text?this._name_null.visible=!0:this._name_null.visible=!1,""==this._tel.text?(console.log("电话不能为空"),this._tel_null.visible=!0):this._tel_null.visible=!1,""==this._addr.text?(console.log("地址不能为空"),this._addr_null.visible=!0):this._addr_null.visible=!1,""!=this._name.text&&""!=this._tel.text&&""!=this._addr.text&&(AddressApi.sendAddressInfo(this._name.text,this._tel.text,this._addr.text,this.itemId),this.TalkingDataAward(this.itemId),this._sendGroup.visible=!0)
},t.prototype.TalkingDataAward=function(e){switch(e){case 2e4:window.TDGA.onEvent("赠出奖品数",{Dior:1});break;case 20001:window.TDGA.onEvent("赠出奖品数",{Zippo:1});break;case 20002:window.TDGA.onEvent("赠出奖品数",{Philips:1})}},t}(eui.Component);__reflect(AddressPanel.prototype,"AddressPanel");var GameOver=function(e){function t(t,i,n,o,s,a){var r=e.call(this)||this;return r._score=i,r._type=n,r._level=o,r.goodsItemData=s,r.m_mainsence=a,r.m_time=t,r.skinName="resource/skin/gameover.exml",r}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init(),this.btn_fangqi.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFangqi,this),this.btn_fangqi1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFangqi,this),this.btn_reset.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickReset,this)},t.prototype.init=function(){1==this._type?this.gp_tiyan.visible=!0:2==this._type&&(this.gp_tiyan.visible=!1)},t.prototype.onClickFangqi=function(){RougeGameApi.gameEnd(this.goodsItemData.subGameId,0,this._level,this._score,this.m_time),LayerUtil.shopMain.stage.removeChild(this),LayerUtil.shopMain.stage.contains(LayerUtil.gameMain)&&LayerUtil.shopMain.stage.removeChild(LayerUtil.gameMain),console.log("this.m_time    "+this.m_time)},t.prototype.onClickReset=function(){Data.GameContext.player.goldNumber>=this.goodsItemData.resetPrice&&(RougeGameApi.startGame(this.goodsItemData.subGameId,GameEnd.RESULT_RESET),console.log("*******Send   ed "),console.log("AccountData.accoundData.gold   :"+Data.GameContext.player.goldNumber),LayerUtil.gameMain.initGame1(),LayerUtil.shopMain.stage.removeChild(this))},t}(eui.Component);__reflect(GameOver.prototype,"GameOver");var Marquee=function(e){function t(){var t=e.call(this)||this;return t.isRunning=!1,t.allMsg=new Array,t.skinName="resource/skin/marquee.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.mask=new egret.Rectangle(0,0,this.width,this.height),this.anchorOffsetX=500,this.anchorOffsetY=20},t.prototype.NotifyMsg=function(e,t){void 0===t&&(t=!1),1==this.isRunning?this.allMsg.push({content:e,isrich:t}):this.ExcuteMsg(e,t)},t.prototype.ExcuteMsg=function(e,t){var i=this;void 0===t&&(t=!1);var n=this.getChildAt(1);this.isRunning=!0,n.wordWrap=!0,1==t?n.textFlow=(new egret.HtmlTextParser).parser(e):n.text=e,egret.Tween.get(n).to({x:n.x-(n.width+this.width)},12e3).call(function(){if(n.x+=n.width+i.width,n.text="",i.allMsg.length>0){var e=i.allMsg.shift();i.ExcuteMsg(e.content,e.isrich)}else i.isRunning=!1,egret.Tween.removeTweens(n)})},t}(eui.Component);__reflect(Marquee.prototype,"Marquee");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.res_loadingBg="resource/assets/game/kouhong/kaishi.png",t.res_loadingBg1="resource/assets/loading/logo.png",t.res_loadingBg2="resource/assets/loading/main_img.png",t.res_loadingBg3="resource/assets/loading/lodImg.png",t.loadW=750,t.devDown=150,t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.w=Main._screenW,this.h=Main._screenH,console.log(this.w+"^^"+this.h);var e=new egret.ImageLoader;e.once(egret.Event.COMPLETE,this.imgLoadBgHandler,this),e.load(this.res_loadingBg);var t=new egret.ImageLoader;t.once(egret.Event.COMPLETE,this.imgLoad2Handler,this),t.load(this.res_loadingBg3),this.img_loadingBg=new egret.Bitmap,this.img_loadingBg1=new egret.Bitmap,this.img_loadingBg2=new egret.Bitmap,this.img_loadingBg3=new egret.Bitmap,this.addChildAt(this.img_loadingBg,0),this.addChildAt(this.img_loadingBg1,1),this.addChildAt(this.img_loadingBg2,1),this.addChildAt(this.img_loadingBg3,1),this.textField=new egret.TextField,this.textField.textColor=16777215,this.textField.size=20,this.textField.width=this.w,this.textField.height=100,this.textField.y=this.h/2+200,this.textField.textAlign=egret.HorizontalAlign.CENTER,this.textField.verticalAlign=egret.VerticalAlign.MIDDLE,console.log(this.textField.x+"%%%"+this.textField.y),this.addChildAt(this.textField,3),this.textField2=new egret.TextField,this.textField2.textColor=16777215,this.textField2.size=20,this.textField2.width=this.w,this.textField2.height=100,this.textField2.y=this.h/2+300,this.textField2.textAlign=egret.HorizontalAlign.CENTER,this.textField2.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChildAt(this.textField2,3),this.addEventListener(egret.Event.ENTER_FRAME,this.updata,this)},t.prototype.updata=function(){this.img_loadingBg3.rotation+=5},t.prototype.imgLoadBgHandler=function(e){this.img_loadingBg.texture=this.getTexture(e),this.img_loadingBg.width=Main._screenW,this.img_loadingBg.height=Main._screenH},t.prototype.imgLoad0Handler=function(e){this.img_loadingBg1.texture=this.getTexture(e),this.img_loadingBg1.scaleX=.7,this.img_loadingBg1.scaleY=.7,this.img_loadingBg1.x=30,this.img_loadingBg1.y=30},t.prototype.imgLoad1Handler=function(e){this.img_loadingBg2.texture=this.getTexture(e),this.img_loadingBg2.x=this.w/2-this.img_loadingBg2.width/2,this.img_loadingBg2.y=this.h/7},t.prototype.imgLoad2Handler=function(e){this.img_loadingBg3.texture=this.getTexture(e),this.img_loadingBg3.anchorOffsetX=this.img_loadingBg3.width/2,this.img_loadingBg3.anchorOffsetY=this.img_loadingBg3.height/2,this.img_loadingBg3.x=this.w/2,this.img_loadingBg3.y=this.h/2,console.log(this.img_loadingBg3.x+"#@!#!@+"+this.w+"图片大小"+this.img_loadingBg3.width)},t.prototype.getTexture=function(e){var t=e.target,i=t.data,n=new egret.Texture;return n.bitmapData=i,n},t.prototype.onProgress=function(e,t){},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Regame=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skin/regame.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init(),this.btnlabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickClose,this),this.btnbg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickClose,this)},t.prototype.init=function(){},t.prototype.onclickClose=function(){this.parent.removeChild(this),LayerUtil.hallPanel.stage.removeChild(LayerUtil.gameMain),Data.DataManager.subGames.forEach(function(e){e.gameType==Data.GameType.TI_YAN&&(LayerUtil.gameMain=null,LayerUtil.gameMain=new GameMain(e,LayerUtil.shopMain),LayerUtil.hallPanel.stage.addChild(LayerUtil.gameMain))})},t}(eui.Component);__reflect(Regame.prototype,"Regame");var Share=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skin/share.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init(),this._cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickClose,this)},t.prototype.init=function(){},t.prototype.onclickQueding=function(){},t.prototype.onclickClose=function(){this.parent.removeChild(this)},t}(eui.Component);__reflect(Share.prototype,"Share");var ShopMain=function(e){function t(){var t=e.call(this)||this;return t.index=1,t.skinName="resource/skin/shopmain.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.BG.width=Main._screenW,this.BG.height=Main._screenH,this.init()},t.prototype.init=function(){},t}(eui.Component);__reflect(ShopMain.prototype,"ShopMain");var AddressApi=function(){function e(){}return e.getAddressInfo=function(){var e=egret.getOption("openId");console.log("openId   "+e);var t="consignee/get?openId="+e;BaseApi.get(t,this.onGetAddressComplete)},e.onGetAddressComplete=function(e){console.log("Send Success!!!");var t=e.currentTarget,i=JSON.parse(t.response).data;i&&(console.log("get address data : ",i),Data.GameContext.address=i,EventManager.getInstance().SendEvent(ApiEvent.ADDRESS_INFO))},e.sendAddressInfo=function(e,t,i,n){var o=egret.getOption("openId");console.log("openId   "+o);var s="?openId="+o+"&name="+e+"&tel="+t+"&addr="+i+"&itemId="+n,a="gameRouge/collect"+s;BaseApi.get(a,this.onSendAddressComplete)},e.onSendAddressComplete=function(e){console.log("Send Success!!!");var t=e.currentTarget,i=JSON.parse(t.response).data;console.log("send address data : ",i)},e}();__reflect(AddressApi.prototype,"AddressApi");var ApiEvent=function(){function e(){}return e.PLAYER_INFO="player_info",e.RANK_INFO="rank_info",e.CHANGE_INFO="change_info",e.ADDRESS_INFO="address_info",e.PAY_SUCCESS="pay_success",e.SHARE_SUCCESS="share_success",e}();__reflect(ApiEvent.prototype,"ApiEvent");var BaseApi=function(){function e(){}return e.get=function(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null);var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT;var s=this.host+e;o.open(s,egret.HttpMethod.GET),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(),console.log("get url:"+s),o.addEventListener(egret.Event.COMPLETE,function(e){e.currentTarget;t&&t(e)},this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){e.currentTarget;console.error("io error : ",s),i&&i(e)},this),o.addEventListener(egret.ProgressEvent.PROGRESS,function(e){e.currentTarget;console.log("on progress : ",s),n&&n(e)},this)},e.host="http://kh.chitugame.com/ct-admin/",e.isEditor=!0,e}();__reflect(BaseApi.prototype,"BaseApi");var EventManager=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.SendEvent=function(e,t){void 0===t&&(t=null);var i=new egret.Event(e);i.data=t,this.dispatchEvent(i),egret.Event.release(i)},t.getInstance=function(){return this.instance||(this.instance=new t,console.log("EventManager Init   !")),this.instance},t}(egret.EventDispatcher);__reflect(EventManager.prototype,"EventManager");var GameEnd=function(){function e(){}return e.RESULT_WIN=1,e.RESULT_LOSE=0,e.RESULT_RESET=1,e}();__reflect(GameEnd.prototype,"GameEnd");var GoodsApi=function(){function e(){}return e.getGoodsInfo=function(){var e="config/getMinConfig";BaseApi.get(e,this.onGetGoodsComplete)},e.onGetGoodsComplete=function(e){console.log("Send Success!!!");var t=e.currentTarget,i=JSON.parse(t.response).data;console.log("get goods data : ",i),Data.DataManager.init(i.sys_subGame.value,i.sys_goods.value)},e}();__reflect(GoodsApi.prototype,"GoodsApi");var ItemDefine=function(){function e(){}return e.Diamond=10001,e.Gold=10002,e.LuckyCoin=10003,e}();__reflect(ItemDefine.prototype,"ItemDefine");var LayerUtil=function(){function e(){}return e.addPopUp=function(t){t.x=(e.shopMain.stage.stageWidth-t.width)/2,t.y=(e.shopMain.stage.stageHeight-t.height)/2,e.popupMain.addChild(t),e.shopMain.stage.addChild(e.popupMain)},e.removePopup=function(t){e.popupMain.removeChild(t),t=null},e}();__reflect(LayerUtil.prototype,"LayerUtil");var OrderApi=function(){function e(){}return e.createOrder=function(e,t){var i=egret.getOption("openId");console.log("openId   "+i),t=100*t;var n="?openId="+i+"&body="+e+"&total_fee="+t+"&trade_type=JSAPI",o="weixin/create"+n;BaseApi.get(o,this.onGetComplete)},e.onGetComplete=function(e){window.TDGA.onChargeRequest({orderId:"123456",iapId:"喵喵口红",currencyAmount:6,currencyType:"CNY",virtualCurrencyAmount:"60",paymentType:"weChatPay"}),console.log("Send Success!!!");var t=e.currentTarget;console.log("get data : ",t.response);var i=JSON.parse(t.response).data;this.SendSuccess=!0,this.SendCallBack=i,WeChatApi.weChatPay(i),console.log(i),console.log("下单成功  调起支付请求！")},e.purchase=function(e,t){var i=Data.GameContext.player.uid;console.log("UserID    "+i);var n="?uid="+i+"&itemId="+e+"&number="+t,o="player/purchase"+n;BaseApi.get(o,this.onCompletePurchase)},e.onCompletePurchase=function(e){console.log("*******Send Success!!!");var t=e.currentTarget;console.log("get data : ",t.response),PlayerApi.getPlayerInfo()},e.payReward=function(e){var t=egret.getOption("openId");console.log("openId   "+t);var i="?openId="+t+"&reward="+e,n="payReward/getFirstPayReward"+i;BaseApi.get(n,this.onGetCompleteFirstCharge)},e.onGetCompleteFirstCharge=function(e){console.log("onGetCompleteFirstCharge Success!!!");var t=e.currentTarget;console.log("get data : ",t.response);JSON.parse(t.response).data;EventManager.getInstance().SendEvent(ApiEvent.PLAYER_INFO)},e.wechatAPI=function(){console.log("*******点击响应");var e=egret.getOption("openId");console.log("openId   "+e);var t=window.location.href;t=encodeURIComponent(t),console.log("currentUrl  "+t);var i="?openId="+e+"&url="+t,n="weixin/getSignForShare"+i;BaseApi.get(n,this.onGetCompleteRegister)},e.onGetCompleteRegister=function(e){console.log("bind Success!!!");var t=e.currentTarget;console.log("get bind data : ",t.response);var i=JSON.parse(t.response).data;WeChatApi.weChatRegister(i),console.log(i),console.log("  已发送！")},e.SendSuccess=!1,e.SendCallBack=null,e}();__reflect(OrderApi.prototype,"OrderApi");var DateTimer=function(e){function t(t,i){void 0===i&&(i=0);var n=e.call(this)||this;return n.currentCount=0,n.delay=t,n.repeatCount=i,n}return __extends(t,e),t.prototype.start=function(){this.previous=egret.getTimer(),this.accTime=0,egret.startTick(this.update,this)},t.prototype.reset=function(){this.previous=egret.getTimer(),this.accTime=0,this.currentCount=0},t.prototype.stop=function(){egret.stopTick(this.update,this)},t.prototype.update=function(){for(this.curTime=egret.getTimer(),this.passTime=this.curTime-this.previous,this.previous=this.curTime,this.accTime+=this.passTime;this.accTime>=this.delay;)this.accTime-=this.delay,this.currentCount++,this.repeatCount>0&&this.currentCount==this.repeatCount&&(this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER_COMPLETE)),this.stop()),this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER));return!1},t}(egret.EventDispatcher);__reflect(DateTimer.prototype,"DateTimer");var PlayerApi=function(){function e(){}return e.getPlayerInfo=function(){var e=egret.getOption("openId"),t="player/getPlayerByOpenId?openId="+e;BaseApi.get(t,this.onGetComplete)},e.onGetComplete=function(e){var t=e.currentTarget;console.log("get data : ",t.response);var i=JSON.parse(t.response).data;Data.GameContext.player=i,EventManager.getInstance().SendEvent(ApiEvent.PLAYER_INFO)},e.getPlayerChannelInfo=function(){var e=egret.getOption("td_channelid");Data.ChannelInfo.channelInfo=e,console.log("Data.ChannelInfo.channelInfo:   "+Data.ChannelInfo.channelInfo)},e.sendRankInfo=function(e,t,i){var n="?level="+e+"&score="+t+"&aliveTime="+i,o="gameRouge/endGame"+n;BaseApi.get(o,this.onSendRankInfoComplete)},e.onSendRankInfoComplete=function(e){var t=e.currentTarget;console.log("get data : ",t.response)},e.getRankInfo=function(e){var t="rank/getRankList?subGameId="+e;BaseApi.get(t,this.onGetRankInfoComplete)},e.onGetRankInfoComplete=function(e){var t=e.currentTarget,i=JSON.parse(t.response).data;Data.GameContext.rankDataArray=i.rankList,Data.GameContext.countDown=i.countDown,console.log("get data : ",i),EventManager.getInstance().SendEvent(ApiEvent.RANK_INFO)},e}();__reflect(PlayerApi.prototype,"PlayerApi");var RougeGameApi=function(){function e(){}return e.startGame=function(e,t){var i=Data.GameContext.player.openId;console.log("openId   "+i);var n="?openId="+i+"&subGameId="+e+"&reset="+t,o="gameRouge/startGame"+n;BaseApi.get(o,this.onCompleteGameStart)},e.onCompleteGameStart=function(e){console.log("Send Success!!!");var t=e.currentTarget,i=JSON.parse(t.response).data;console.log("get data : ",i),Data.GameContext.isWin=1==i.winFlag?!0:!1,console.log("Data.GameContext.isWin    "+Data.GameContext.isWin)},e.gameEnd=function(e,t,i,n,o){var s=Data.GameContext.player.openId;console.log("openId   "+s);var a="?openId="+s+"&subGameId="+e+"&win="+t+"&level="+i+"&score="+n+"&aliveTime="+o,r="gameRouge/endGame"+a;console.log("End game :URL :      "+r),BaseApi.get(r,this.onCompleteGameEnd)},e.onCompleteGameEnd=function(e){console.log("Send Success!!!");var t=e.currentTarget;console.log("get data : ",t.response);JSON.parse(t.response).data;PlayerApi.getPlayerInfo()},e}();__reflect(RougeGameApi.prototype,"RougeGameApi");var ShareInfoApi=function(){function e(){}return e.getShareInfo=function(){var e=egret.getOption("openId");console.log("openId   "+e);var t="weixin/getShareTimes?openId="+e;BaseApi.get(t,this.onGetShareComplete)},e.onGetShareComplete=function(e){console.log("Send Success!!!");var t=e.currentTarget,i=JSON.parse(t.response).data;console.log("get shareTimes data : ",i),Data.GameContext.shareTimes=i},e.sendShareComplateInfo=function(){var e=egret.getOption("openId");console.log("openId   "+e);var t="weixin/shareComplete?openId="+e;BaseApi.get(t,this.onSendComplete)},e.onSendComplete=function(e){console.log("Send Success!!!");var t=e.currentTarget,i=JSON.parse(t.response).data;console.log("send shareTimes data : ",i),Data.GameContext.shareTimes=i},e}();__reflect(ShareInfoApi.prototype,"ShareInfoApi");var utils;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i._soundURL="bgSound",i._positon=0,i._loop=1,i._status=0,t&&(i._soundURL=t),i._sound=new egret.Sound,i._loadSound(),i}return __extends(t,e),t.prototype._loadSound=function(){RES.getRes(this._soundURL)?this._sound=RES.getRes(this._soundURL):(this._sound.once(egret.Event.COMPLETE,this.loadComplete,this),this._sound.once(egret.IOErrorEvent.IO_ERROR,this.onLoadErr,this),this._sound.load(this._soundURL))},t.prototype.loadComplete=function(e){this._status=3;var t="加载完成";console.log(t),egret.log(t),this._sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadErr,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,t)},t.prototype.onLoadErr=function(e){this._status=4;var t="加载失败"+this._soundURL;egret.log(t),this._sound.removeEventListener(egret.Event.COMPLETE,this.loadComplete,this),this.dispatchEventWith(egret.IOErrorEvent.IO_ERROR,!1,t)},t.prototype.setUrl=function(e){this._soundURL=e,this._loadSound()},t.prototype.looped=function(e){console.log("looped"),this._soundChannel=null,this._positon=0,this._status=0;var t="播放完成";this._loop>=0?this.dispatchEventWith(egret.Event.SOUND_COMPLETE,!1,t):this.play()},t.prototype.getStatus=function(){return this._status},t.prototype.setVolume=function(e){console.log(this._status),1===this._status&&(this._soundChannel.volume=e/100)},t.prototype.showPosition=function(){return 1===this._status&&(this._positon=this._soundChannel.position),this._positon},t.prototype.play=function(){return-1!=this._status?4===this._status?void this._loadSound():(this._status=1,this._soundChannel&&this._soundChannel.stop(),this._soundChannel=this._sound.play(this._positon,1),this._soundChannel.once(egret.Event.SOUND_COMPLETE,this.looped,this),this._status):void 0},t.prototype.setLoop=function(e){return void 0===e&&(e=1),this._loop=e,e},t.prototype.pause=function(){var e=this._status;return 1===e&&(this._positon=this._soundChannel.position,this._soundChannel.stop(),this._status=2),egret.log(this._positon),e},t.prototype.resume=function(){var e=this._status;return 2===e&&this.play(),egret.log(this._positon),e},t.prototype.stop=function(){this._status=0,this._positon=0,this._soundChannel.stop(),this._soundChannel=null},t}(egret.DisplayObjectContainer);e.SoundBase=t,__reflect(t.prototype,"utils.SoundBase")}(utils||(utils={}));var utils;!function(e){var t=function(){function t(){if(null!=t._instance)throw new Error("singleton")}return t.instance=function(){return null==this._instance?this._instance=new t:this._instance},t.prototype.initSound=function(){console.log("initSound!!!"),this.anniu=new e.SoundBase("anniu_mp3"),this.bg=new e.SoundBase("bg_mp3"),this.daojishi=new e.SoundBase("daojishi_mp3"),this.loading=new e.SoundBase("loading_mp3"),this.success=new e.SoundBase("success_mp3"),this.shibai=new e.SoundBase("shibai_mp3"),this.bit=new e.SoundBase("click_mp3")},t.prototype.playbit=function(){this.bit.play()},t.prototype.playAnniu=function(){this.anniu.play()},t.prototype.playBg=function(){this.bg.play()},t.prototype.stopBg=function(){this.bg.stop()},t.prototype.playDaojishi=function(){this.daojishi.play()},t.prototype.playLoading=function(){this.loading.play()},t.prototype.playSuccess=function(){this.success.play()},t.prototype.playShibai=function(){this.shibai.play()},t}();e.SoundUtils=t,__reflect(t.prototype,"utils.SoundUtils")}(utils||(utils={}));var ViewManager=function(){function e(){}return e.Init=function(e){this.getInstance(),this.setRoot(e)},e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.setRoot=function(e){this._root=e},e.getRoot=function(){return this._root},e.OpenView=function(e,t){switch(console.log("即将打开"+e+"    数据"+t),e){case ViewName.HallPanelView:}},e.prototype.createBitmapByName=function(e,t,i,n,o){var s=new egret.Bitmap,a=RES.getRes(e);return s.texture=a,s.x=t,s.y=i,s.width=n,s.height=o,s},e.prototype.createShape=function(e,t,i,n,o,s,a,r){var h;return h=new egret.Shape,h.x=e,h.y=t,h.graphics.clear(),h.graphics.beginFill(i,n),h.graphics.drawRect(o,s,a,r),h.graphics.endFill(),h},e.prototype.createTextfield=function(e,t,i,n,o,s,a){var r;return r=new egret.TextField,r.x=e,r.y=t,r.width=i,r.height=n,r.text=o,r.size=a,r.textColor=s,r.fontFamily="SimHei",r},e}();__reflect(ViewManager.prototype,"ViewManager");var ViewName=function(){function e(){}return e.HallPanelView="HallPanelView",e}();__reflect(ViewName.prototype,"ViewName");var WeChatApi=function(){function e(){}return e.weChatRegister=function(e){console.log("微信 注册；");var t=new BodyConfig;t.appId="wxba773081caf99027",t.debug=!1,t.timestamp=e.timeStamp,t.nonceStr=e.nonceStr,t.signature=e.sign,t.jsApiList=["checkJsApi","chooseWXPay","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"],wx&&(wx.config(t),console.log("bodyConfig   is ready;"),wx.ready(function(){var e=new BodyMenuShareAppMessage;e.title="领取奖品",e.desc="多款礼品任意选择。",e.link="http://kh.chitugame.com/ct-admin/weixin/auth?td_channelid="+Data.ChannelInfo.channelInfo,e.imgUrl="http://kh.chitugame.com/game/icon.png",e.success=function(){window.TDGA.onEvent("ShareEvent",{forPass:0})},wx.onMenuShareAppMessage(e);var t=new BodyMenuShareTimeline;t.title="领取奖品",t.link="http://kh.chitugame.com/ct-admin/weixin/auth?td_channelid="+Data.ChannelInfo.channelInfo,t.imgUrl="http://kh.chitugame.com/game/icon.png",t.success=function(){window.TDGA.onEvent("普通分享",{forPass:0})},wx.onMenuShareTimeline(t)}))},e.weChatPay=function(e){console.log("微信 PAY"),wx&&(console.log("chooseWXPay"),wx.ready(function(){wx.chooseWXPay({appId:e.appId,timestamp:e.timeStamp,nonceStr:e.nonceStr,"package":e["package"],signType:"MD5",paySign:e.sign,cancel:function(e){Data.GameContext.isFirstOrder=!0},fail:function(e){Data.GameContext.isFirstOrder=!0},success:function(e){EventManager.getInstance().SendEvent(ApiEvent.PAY_SUCCESS),RougeGameApi.startGame(1002,1)}})})),Data.GameContext.isFirstOrder=!1},e}();__reflect(WeChatApi.prototype,"WeChatApi");